# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-–∫–ª—é—á–µ–π

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ì–¥–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã

**–°–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH-–∫–ª—é—á–µ–π –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ –õ–û–ö–ê–õ–¨–ù–û–ô –º–∞—à–∏–Ω–µ (–≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ), –∞ –ù–ï –Ω–∞ Synology!**

–í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Windows), –∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ Synology —á–µ—Ä–µ–∑ SSH.

## –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Git Bash (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Git Bash** –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–Ω–µ PowerShell, –Ω–µ –Ω–∞ Synology!)

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –õ–û–ö–ê–õ–¨–ù–û–ô –º–∞—à–∏–Ω–µ:
```bash
cd C:\Users\studo\Downloads\p039-master\p039-master\backend\deploy
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```bash
bash setup_ssh_keys.sh
```

3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è Synology –æ–¥–∏–Ω —Ä–∞–∑, –∫–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç.

4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ PowerShell

1. –û—Ç–∫—Ä–æ–π—Ç–µ **PowerShell** –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–Ω–µ –Ω–∞ Synology!)

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –õ–û–ö–ê–õ–¨–ù–û–ô –º–∞—à–∏–Ω–µ:
```powershell
cd C:\Users\studo\Downloads\p039-master\p039-master\backend\deploy
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```powershell
.\setup_ssh_keys.ps1
```

3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è Synology –æ–¥–∏–Ω —Ä–∞–∑.

4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

## –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

### 1. –°–æ–∑–¥–∞–π—Ç–µ SSH-–∫–ª—é—á

–í **Git Bash** –∏–ª–∏ **WSL**:

```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—É—Ç—å –∫ .ssh
SSH_DIR="$HOME/.ssh"
# –ò–ª–∏ –¥–ª—è Windows: SSH_DIR="$USERPROFILE/.ssh"

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p "$SSH_DIR"
chmod 700 "$SSH_DIR"

# –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á
ssh-keygen -t ed25519 -f "$SSH_DIR/shortsai_synology" -C "synology-access" -N ""
```

### 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ Synology

```bash
# –í–∞—Ä–∏–∞–Ω—Ç A: —á–µ—Ä–µ–∑ ssh-copy-id (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
ssh-copy-id -i "$SSH_DIR/shortsai_synology.pub" admin@192.168.100.222

# –í–∞—Ä–∏–∞–Ω—Ç B: –≤—Ä—É—á–Ω—É—é
PUBKEY=$(cat "$SSH_DIR/shortsai_synology.pub")
ssh admin@192.168.100.222 "mkdir -p ~/.ssh && chmod 700 ~/.ssh && echo '$PUBKEY' >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH config

–°–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `~/.ssh/config` (–∏–ª–∏ `C:\Users\–í–∞—à–µ–ò–º—è\.ssh\config` –Ω–∞ Windows):

```
Host synology-shortsai
    HostName 192.168.100.222
    User admin
    IdentityFile ~/.ssh/shortsai_synology
    IdentitiesOnly yes
    StrictHostKeyChecking accept-new
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
ssh synology-shortsai 'echo "OK"; pwd'
```

–ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–∞—Ä–æ–ª—è ‚Äî –≥–æ—Ç–æ–≤–æ! ‚úÖ

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH-–∫–ª—é—á–µ–π:

1. **–î–µ–ø–ª–æ–π –±–µ–∑ –ø–∞—Ä–æ–ª—è:**
   ```bash
   cd backend/deploy
   bash full_deploy.sh
   ```

2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Synology:**
   ```bash
   ssh synology-shortsai
   ```

3. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è:**
   ```bash
   cd backend/deploy
   bash setup_sudo_nopasswd.sh
   ```

## –ü—Ä–æ–±–ª–µ–º—ã?

–°–º. –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `backend/deploy/SSH_KEYS_SETUP.md`

