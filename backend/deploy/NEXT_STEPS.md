# ‚úÖ VPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω! –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

## –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

‚úÖ –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ VPS:
- `159.255.37.158:5000` ‚Üí `10.8.0.2:8080` (Backend)
- `159.255.37.158:5001` ‚Üí `10.8.0.2:5001` (DSM)
- `159.255.37.158:6690` ‚Üí `10.8.0.2:6690` (Drive)
- `159.255.37.158:3000` ‚Üí `10.8.0.2:3000` (–î—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å)

‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (systemd service)

## –ü–æ—á–µ–º—É curl –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

Backend –Ω–∞ Synology –µ—â–µ **–Ω–µ –∑–∞–ø—É—â–µ–Ω** –∏–ª–∏ **–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ VPN**.

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Synology —á–µ—Ä–µ–∑ VPN

**–ù–∞ VPS –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ VPN —Ç—É–Ω–Ω–µ–ª—è
ip link show tun0

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Synology
ping -c 3 10.8.0.2

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ 8080 –Ω–∞ Synology
timeout 3 bash -c "echo > /dev/tcp/10.8.0.2/8080" && echo "Port 8080 is open" || echo "Port 8080 is closed"
```

### 2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å backend –Ω–∞ Synology

**–° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:**

```powershell
cd C:\Users\studo\Downloads\p039-master\p039-master\backend\deploy
bash full_deploy.sh
```

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:**

```powershell
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ Synology
cd C:\Users\studo\Downloads\p039-master\p039-master
scp backend\deploy\synology_deploy.sh admin@192.168.100.222:/tmp/
scp backend\deploy\config.sh admin@192.168.100.222:/tmp/

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Synology
ssh admin@192.168.100.222

# –ù–∞ Synology –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
chmod +x /tmp/*.sh
bash /tmp/synology_deploy.sh
```

### 3. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ

**–ù–∞ VPS:**

```bash
curl http://10.8.0.2:8080/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"ok":true}

curl http://159.255.37.158:5000/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"ok":true}
```

## –ï—Å–ª–∏ VPN —Ç—É–Ω–Ω–µ–ª—å –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω:

–ï—Å–ª–∏ `ip link show tun0` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

1. –û–±–Ω–æ–≤–∏—Ç–µ `backend/deploy/config.sh`:
   ```bash
   export SYNO_HOST="192.168.100.222"  # –ü—Ä—è–º–æ–π IP –≤–º–µ—Å—Ç–æ VPN
   ```

2. –û–±–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ –Ω–∞ VPS, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `192.168.100.222` –≤–º–µ—Å—Ç–æ `10.8.0.2`

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ backend –Ω–∞ Synology! üöÄ**





