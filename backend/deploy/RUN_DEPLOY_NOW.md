# üöÄ –ó–ê–ü–£–°–¢–ò–¢–ï –î–ï–ü–õ–û–ô –°–ï–ô–ß–ê–°

## –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± (Git Bash)

–û—Ç–∫—Ä–æ–π—Ç–µ **Git Bash** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /c/Users/studo/Downloads/p039-master/p039-master/backend
bash deploy/full_synology_deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –í–°–ï —à–∞–≥–∏:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç SSH
2. ‚úÖ –°–∫–æ–ø–∏—Ä—É–µ—Ç –∫–æ–¥ –Ω–∞ Synology
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç Node.js –∏ PM2
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
5. ‚úÖ –°–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç
6. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç .env (—Å–æ–∑–¥–∞—Å—Ç –∏–∑ env.example –µ—Å–ª–∏ –Ω–µ—Ç)
7. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç —á–µ—Ä–µ–∑ PM2
8. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ä–∞–±–æ—Ç—É

**–ï—Å–ª–∏ SSH —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å** ‚Äî —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –ß—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –®–∞–≥ 1: –î–µ–ø–ª–æ–π –∫–æ–¥–∞
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–∫—Ä–æ–º–µ node_modules, .git, tmp, storage/videos)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ rsync –∏–ª–∏ scp (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Node.js –≤–µ—Ä—Å–∏—è
- npm –≤–µ—Ä—Å–∏—è
- PM2 (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç –µ—Å–ª–∏ –Ω–µ—Ç)

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `rm -rf node_modules`
- `npm install`

### –®–∞–≥ 4: –°–±–æ—Ä–∫–∞
- `npm run build` (TypeScript ‚Üí JavaScript –≤ dist/)

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
- –°–æ–∑–¥–∞—Å—Ç `.env` –∏–∑ `env.example` –µ—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç
- ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` –≤—Ä—É—á–Ω—É—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

### –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ PM2
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ó–∞–ø—É—Å—Ç–∏—Ç `dist/index.js` —á–µ—Ä–µ–∑ PM2
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç health endpoint
- –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å PM2

---

## –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env –Ω–∞ Synology:

```bash
ssh admin@192.168.100.222 'nano /volume1/Hotwell/Backends/shortsai-backend/.env'
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
- `PORT=8080`
- `BACKEND_URL=http://159.255.37.158:5000`
- `FIREBASE_SERVICE_ACCOUNT={...}`
- `TELEGRAM_API_ID`, `TELEGRAM_API_HASH`
- `TELEGRAM_SESSION_SECRET`
- `STORAGE_ROOT=/volume1/Hotwell/Backends/shortsai-backend/storage/videos`
- –ò –¥—Ä—É–≥–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:

```bash
ssh admin@192.168.100.222 'pm2 restart shortsai-backend'
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# –°—Ç–∞—Ç—É—Å
ssh admin@192.168.100.222 'pm2 status'

# –õ–æ–≥–∏
ssh admin@192.168.100.222 'pm2 logs shortsai-backend'

# Health check
ssh admin@192.168.100.222 'curl http://localhost:8080/health'

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
ssh admin@192.168.100.222 'pm2 restart shortsai-backend'
```

---

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ–π—á–∞—Å:** `bash deploy/full_synology_deploy.sh` üöÄ




